CloneInfo

  - keywords   - keyword and adaptor written
  - reading from ace
  - reading from xml

Translations

  - combining CDS and mRNA objects
  - parsing the new CDS <start> <end> objects
  - getting phase right from cds_start_not_found and cds_end_not_found
  - translations in xml

Genes across clones

  - from ace   - joining genes together into otter objects
  - from otter - splitting genes and adding tags
  - in otter   - joining genes together

Gene names

  - assigning stable ids (also transcripts and exons)
  - synonyms

Assembly Coordinates
 
  - reading from xml
  - creating from otter - need to store these - on slice or RawContig

Authors on comments?

Locking - locks clones and genes

GeneLock ?

Test for AnnotatedTranscript

Sequence offset - off by 4 in apollo. ensembl gives back wrong length sequence (off by one)


Annotation walkthrough
----------------------

1) Ask for a region chr,start,end       #  get_region (perl)
2) Get slice                            #  done
3) Lock clones or die if already locked #  done
4) Get xml from otter                   #  done (assembly info done)
5) Flag partial genes                   #  Change type on these?
6) Get features from core db            #  not done - old stype db
7) Load into apollo                     #  write file and read using Vivek's adapter

8) Regenerate xml from apollo - check is same as went in

Gene annotation steps

9) Create a new gene, with info
10) Delete a gene
11) Delete a transcript
12) Merge 2 genes
13) Change transcript info - name
14) Change transcript info - evidence
15) Change transcript info - remarks
16) Change transcript info - tags
17) Change gene info - name
18) Change gene info - remarks
19) Change gene info - author
20) Add clone info
21) Change clone info
22) Delete clone info

Writeback steps

23) Create xml                                     # Vivek's java code
24) Parse xml - read region                        # Perl code - 
                                                   # Need xml to slice code - done
25) Check clone locks                              # 
26) Read genes currently in the database           #
27) Find new genes (no matching stable ids) - new stable ids
28) Find new transcripts (no matching stable ids) new stable ids
29) Find deleted genes (missing stable ids)
30) Find deleted transcripts( missing stable ids) - change type
31) Map transcript stable ids - increase version
32) Map gene stables ids - increate version
33) Map exons - map if identical, otherwise new
34) Write new genes and info - 



Round trip experiences
----------------------

Database with feaetures - too many features - try the finished database

Ensj slow to load - Craig has optimized

Apollo slow to run - need slides for annotations - hmm.

Change blue colour. - done

Annotation menus not right - no comments - fixed now

Blixem/dotter - Steve

Movement panel doesn't work - look in ensj - fixed

Can't create annotations  - editing is a bit screwed - deleting/merging

Annotation menu doesn't have all the options - fixed

Benchmark ; ensj fetch
            apollo load
            scrolling
            expanding/contracting  - Steve has optimized

Otter on Friday 11/10/02
------------------------

Gene writing - getting annotation comparison right.

 - which genes are new (done);
 - which genes have been deleted (done);
 - which genes are modified (in progress)(done);

 - which transcripts are new (done)
 - which transcript have been deleted (done);
 - which transcripts are modified (in progressA(done))

 - which exons are new (done)
 - which exons are deleted (done)
 - which exons are modified(in progress);(done)

 - updating current_gene_info and current_transcript_info; no tables or code for this yet (done)

Are genes linked by stable id and version? (just stable id)

Can multiple gene versions be stored in the database - does only the highest version come out? (done - 
needs main trunk change.  Is currently in AnnotatedGeneAdpator)

Getting annotations - modifying and writing - test script for this. (Started in AnnotationBroker.t)(jig_genes)

CloneInfo - entering and storing - not in xml yet - (maybe dumped from info)

Storing - storing back into lite as well. (leave until later)

Apollo editing functions functional.

Aim - to be able to retrieve/modify and store annotations through xml and apollo.
asides = exists on gene_info,transcript_info?

Running
--------

Assuming bioperl exists

checkout otter, ensembl and ensj

cvs -d cvs.sanger.ac.uk:/nfs/ensembl/cvsroot co otter
cvs -d cvs.sanger.ac.uk:/nfs/ensembl/cvsroot co ensembl
cvs -d cvs.sanger.ac.uk:/nfs/ensembl/cvsroot co ensj-core

checkout apollo

cvs -d  :ext:mclamp@cvs.gmod.sourceforge.net:/cvsroot/gmod co apollo


Making apollo

cd apollo/src/java
setenv APOLLO_ROOT ../../
make

compiling the OtterAdapter

setenv PERL5LIB

setenv PATH

./get_region

running apollo.

set classpath - apollo and otter stuff and ensj

post_Friday_otter
-----------------

jig_genes with storing.

database -> xml -> modification script -> xml -> database

Apollo reading and writing xml

Apollo editing functions - merging exons, merging transcripts,deleting,
                           flipping strand,

Blixem and dotter - in progress

Importing ace annotations - joining genes (James' scripts)

Testing on a finished analysis database - main trunk.

Apollo with cigar strings.

Stable id generation - in otter. - done

Gene synonyms - do we have name and synonyms  - yup

Translations - generating and reading in xml

Golden path type in xml - golden path checking and
conversion?

start_not_found value generation

clone info - punt.

phases in apollo

web server for xml loading - or a java system call to perl



------------------------------------------------------

xml reading  - done - reads assembly type.

xml to otter - needs testing for modifications - jig_genes
               detecting identical transcript/exon structures
               stable id generation/synonyms

xml          - golden path checking. - checks contig ids, coords and order
               remapping contigs.
               golden path type in xml   - done

xml          - labelling partial genes - change the type to partial

xml          - values for start not found and end not found

otter2xml    - done - anything missing?

otter2ace    - done?


Tests for converter - slice_to_XML and path_to_XML


 - parsing ace : I don't think CDS sequences without mRNAs are being parsed


Back database - ensembl genes, ESTs, mouse hits, blast hits.

Otter server  - Setup, documentation.

Apollo fetch  - config. GUI.  Errors on locks.

Apollo edit - partial genes.  Configuration - mail Nomi.

Apollo write - selective write. Errors. 


Apollo config - multiple data sources, changing host and dbname, DAS

Writing - annotations only, genes plus features, visible features, features by type

HSKER101
MMENDOBA

MMHOXB4PR

Mon 4th November 2002

Otter server installation script.  Heavily lifted from the website installation script.

Otter needs conf files for database and server a la website.

Needs a test xml file

How to set up the InnoDB tables

Tarballs for ensembl perl, otter perl and bioperl

Tarballs for the extra perl modules (which extra ones are needed)

Installation document - docs/otter_install.doc - not finished

November 8th 2002
Stable ids - when importing genes check the stable ids are in the pool.
How do we import ids out of sync?

Apollo editing  = 

Lazy loading of sequence.

Creating genes :

ClassCastException DrawableResultFeatureSet (DrawableAnnotatedFeatureSet 194)

Types of genes through ensj (coming through as UNKNOWN)

Creating genes : multiple transcripts appearing. Types of genes?

Transferring styles when changing adaptors?

Monday Nov 11th 2002

Plan for apollo/otter gui

1) Open/close structure for
  - type include
  - data source config
  - Annotation config

i.e. checkboxes to show/hide different panels

0.5 days

2) Data config
  - basic text fields
  - loading db chooser for mysql instance

1 day

3) Annotation config
  - dynamic based on editable flag in config
  - nicer exception handling

1 day

4) Testing Annotation Edits
  - lock etc
  - round tripping through the server

1 day

total 3.5 days - lets say Friday 15th




